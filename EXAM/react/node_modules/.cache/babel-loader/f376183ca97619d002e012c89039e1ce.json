{"ast":null,"code":"import Axios from 'axios';\nimport { useContext } from 'react';\nimport { AppContext } from '../context/AppContext';\nexport class BaseCrudService {\n  static async getEntities(view) {\n    try {\n      const response = await this.axios.get(view, {\n        headers: {\n          Authorization: \"Bearer \" + this.appContext.jwt\n        }\n      }); // happy case\n\n      if (response.status >= 200 && response.status < 300) {\n        return response.data;\n      } // something went wrong\n\n\n      return [];\n    } catch (reason) {\n      return [];\n    }\n  }\n\n  static async getEntity(id, view) {\n    try {\n      const response = await this.axios.get(view + '/' + id, {\n        headers: {\n          Authorization: \"Bearer \" + this.appContext.jwt\n        }\n      });\n\n      if (response.status >= 200 && response.status < 300) {\n        return response.data;\n      }\n\n      return null;\n    } catch (reason) {\n      return null;\n    }\n  }\n\n  static async createEntity(entity, view) {\n    try {\n      const response = await this.axios.post(view, entity, {\n        headers: {\n          Authorization: \"Bearer \" + this.appContext.jwt\n        }\n      });\n\n      if (response.status >= 200 && response.status < 300) {\n        return response.status;\n      }\n\n      return response.status;\n    } catch (reason) {\n      return reason.status;\n    }\n  }\n\n  static async updateEntity(entity, view) {\n    try {\n      const response = await this.axios.put(view + '/' + entity.id, entity, {\n        headers: {\n          Authorization: \"Bearer \" + this.appContext.jwt\n        }\n      });\n\n      if (response.status >= 200 && response.status < 300) {\n        return response.status;\n      }\n\n      return response.status;\n    } catch (reason) {\n      return reason.status;\n    }\n  }\n\n  static async deleteEntity(id, view) {\n    try {\n      const response = await this.axios.delete(view + '/' + id, {\n        headers: {\n          Authorization: \"Bearer \" + this.appContext.jwt\n        }\n      });\n\n      if (response.status >= 200 && response.status < 300) {\n        return response.status;\n      }\n\n      return response.status;\n    } catch (reason) {\n      return reason.status;\n    }\n  }\n\n}\nBaseCrudService.appContext = useContext(AppContext);\nBaseCrudService.axios = Axios.create({\n  baseURL: \"https://localhost:5001/api/\",\n  headers: {\n    common: {\n      'Content-Type': 'application/json'\n    }\n  }\n});","map":{"version":3,"sources":["D:/Downloads/test-app/exam-react/src/base/BaseCrudService.ts"],"names":["Axios","useContext","AppContext","BaseCrudService","getEntities","view","response","axios","get","headers","Authorization","appContext","jwt","status","data","reason","getEntity","id","createEntity","entity","post","updateEntity","put","deleteEntity","delete","create","baseURL","common"],"mappings":"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","sourcesContent":["import { IBaseDomain } from './contracts/IBaseDomain';\r\nimport Axios from 'axios';\r\nimport { useContext } from 'react';\r\nimport { AppContext } from '../context/AppContext';\r\n\r\nexport abstract class BaseCrudService {\r\n    static appContext = useContext(AppContext);\r\n    static axios = Axios.create(\r\n        {\r\n            baseURL: \"https://localhost:5001/api/\",\r\n            headers: {\r\n                common: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            }\r\n        }\r\n    );\r\n\r\n    static async getEntities<T>(view: string): Promise<T[]> {\r\n        try {\r\n            const response = await this.axios\r\n                .get(view, {\r\n                    headers: {\r\n                        Authorization: \"Bearer \" + this.appContext.jwt\r\n                    }\r\n                }\r\n                );\r\n            // happy case\r\n            if (response.status >= 200 && response.status < 300) {\r\n                return response.data;\r\n            }\r\n\r\n            // something went wrong\r\n            return [];\r\n\r\n        } catch (reason) {\r\n            return [];\r\n        }\r\n    }\r\n\r\n    static async getEntity<T>(id: string, view: string): Promise<T | null> {\r\n        try {\r\n            const response = await this.axios\r\n                .get(view + '/' + id, {\r\n                    headers: {\r\n                        Authorization: \"Bearer \" + this.appContext.jwt\r\n                    }\r\n                }\r\n                );\r\n\r\n            if (response.status >= 200 && response.status < 300) {\r\n                return response.data;\r\n            }\r\n\r\n            return null;\r\n\r\n        } catch (reason) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    static async createEntity<T>(entity: T, view: string): Promise<number> {\r\n        try {\r\n            const response = await this.axios\r\n                .post(view, entity, {\r\n                    headers: {\r\n                        Authorization: \"Bearer \" + this.appContext.jwt\r\n                    }\r\n                })\r\n\r\n            if (response.status >= 200 && response.status < 300) {\r\n\r\n                return response.status;\r\n            }\r\n\r\n            return response.status;\r\n        }\r\n        catch (reason) {\r\n            return reason.status;\r\n        }\r\n    }\r\n\r\n    static async updateEntity<T extends IBaseDomain>(entity: T, view: string): Promise<number> {\r\n        try {\r\n            const response = await this.axios\r\n                .put(view + '/' + entity.id, entity, {\r\n                    headers: {\r\n                        Authorization: \"Bearer \" + this.appContext.jwt\r\n                    }\r\n                });\r\n\r\n            if (response.status >= 200 && response.status < 300) {\r\n                return response.status;\r\n            }\r\n            return response.status;\r\n        }\r\n        catch (reason) {\r\n            return reason.status;\r\n        }\r\n    }\r\n\r\n    static async deleteEntity(id: string, view: string): Promise<number> {\r\n\r\n        try {\r\n            const response = await this.axios\r\n                .delete(view + '/' + id, {\r\n                    headers: {\r\n                        Authorization: \"Bearer \" + this.appContext.jwt\r\n                    }\r\n                });\r\n\r\n            if (response.status >= 200 && response.status < 300) {\r\n                return response.status;\r\n            }\r\n            return response.status;\r\n        }\r\n        catch (reason) {\r\n            return reason.status;\r\n        }\r\n    }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}